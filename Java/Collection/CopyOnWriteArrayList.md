# CopyOnWriteArrayList

## 1.什么是CopyOnWrite

顾名思义，就是在写的时候copy出来一份新的数组，当写完成之后，再将原数组的指针指向新的数组。

## 2.为什么需要CopyOnWriteArrayList

因为在多线程之中，比如ArrayList,你在遍历的时候如果有一个线程正在添加，就会抱错。那么CopyOnWriteArrayList是怎么解决这个问题的呢？很简单，就是在写的时候开辟一个新的内存，不会影响到原来的数组，你读的时候还是原来的引用，只有当写完的时候，也就是元素添加完成的时候，才会将原来的指针指向新的数组。

## 3.使用场景是什么？

* 读多写少
* 数组不大，因为大数组中光拷贝就需要花很长时间，还要消耗很大的内存